import javax.swing.*;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;
import java.awt.*;

class EquacaoSegundoGrau extends JFrame {

    private JSpinner spinnerA, spinnerB, spinnerC;
    private JLabel labelTipo, labelResultado;

    public EquacaoSegundoGrau() {
        setTitle("Equação do Segundo Grau");
        setSize(500, 350);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);

        // Painel principal
        JPanel painel = new JPanel(new BorderLayout(10, 10));
        painel.setBackground(new Color(240, 240, 240));
        painel.setBorder(BorderFactory.createEmptyBorder(15, 15, 15, 15));

        // Título
        JLabel titulo = new JLabel("ax² + bx + c = 0", SwingConstants.CENTER);
        titulo.setFont(new Font("Arial", Font.BOLD, 22));
        painel.add(titulo, BorderLayout.NORTH);

        // Painel dos spinners
        JPanel painelValores = new JPanel(new GridLayout(1, 3, 15, 15));
        painelValores.setBackground(new Color(240, 240, 240));

        spinnerA = criarSpinner("a", 1);
        spinnerB = criarSpinner("b", 0);
        spinnerC = criarSpinner("c", 0);

        painelValores.add(criarPainelSpinner("Valor de a", spinnerA));
        painelValores.add(criarPainelSpinner("Valor de b", spinnerB));
        painelValores.add(criarPainelSpinner("Valor de c", spinnerC));

        painel.add(painelValores, BorderLayout.CENTER);

        // Painel de resultado
        JPanel painelResultado = new JPanel(new GridLayout(2, 1, 5, 5));
        painelResultado.setBackground(Color.WHITE);
        painelResultado.setBorder(BorderFactory.createLineBorder(Color.LIGHT_GRAY));

        labelTipo = new JLabel("Selecione os valores", SwingConstants.CENTER);
        labelTipo.setFont(new Font("Arial", Font.BOLD, 16));

        labelResultado = new JLabel(" ", SwingConstants.CENTER);
        labelResultado.setFont(new Font("Arial", Font.PLAIN, 14));

        painelResultado.add(labelTipo);
        painelResultado.add(labelResultado);

        painel.add(painelResultado, BorderLayout.SOUTH);

        add(painel);

        // Atualiza automaticamente quando mudar o número
        ChangeListener listener = e -> calcular();
        spinnerA.addChangeListener(listener);
        spinnerB.addChangeListener(listener);
        spinnerC.addChangeListener(listener);
    }

    private JSpinner criarSpinner(String nome, int valorInicial) {
        JSpinner spinner = new JSpinner(
                new SpinnerNumberModel(valorInicial, -100, 100, 1)
        );
        spinner.setFont(new Font("Arial", Font.BOLD, 18));
        ((JSpinner.DefaultEditor) spinner.getEditor())
                .getTextField().setHorizontalAlignment(JTextField.CENTER);
        return spinner;
    }

    private JPanel criarPainelSpinner(String texto, JSpinner spinner) {
        JPanel painel = new JPanel(new BorderLayout(5, 5));
        painel.setBackground(Color.WHITE);
        painel.setBorder(BorderFactory.createLineBorder(Color.GRAY));

        JLabel label = new JLabel(texto, SwingConstants.CENTER);
        label.setFont(new Font("Arial", Font.BOLD, 14));

        painel.add(label, BorderLayout.NORTH);
        painel.add(spinner, BorderLayout.CENTER);

        return painel;
    }

    private void calcular() {
        int a = (int) spinnerA.getValue();
        int b = (int) spinnerB.getValue();
        int c = (int) spinnerC.getValue();

        if (a == 0) {
            labelTipo.setText("Não é equação do 2º grau");
            labelTipo.setForeground(Color.RED);
            labelResultado.setText("O valor de 'a' deve ser diferente de zero");
            labelResultado.setFont(new Font("Arial", Font.PLAIN, 14));
            return;
        }

        double delta = b * b - 4 * a * c;

        if (delta < 0) {
            labelTipo.setText("Não existem raízes reais");
            labelTipo.setForeground(new Color(180, 0, 0));
            labelResultado.setText("Delta = " + delta);
            labelResultado.setFont(new Font("Arial", Font.PLAIN, 14));
        }
        else if (delta == 0) {
            double x = -b / (2.0 * a);
            labelTipo.setText("Existe uma raiz real");
            labelTipo.setForeground(new Color(0, 102, 0));
            labelResultado.setText(String.format("x = %.2f", x));
            labelResultado.setFont(new Font("Arial", Font.BOLD, 18));
        }
        else {
            double x1 = (-b + Math.sqrt(delta)) / (2.0 * a);
            double x2 = (-b - Math.sqrt(delta)) / (2.0 * a);
            labelTipo.setText("Existem duas raízes reais");
            labelTipo.setForeground(new Color(0, 0, 150));
            labelResultado.setText(
                    String.format("x₁ = %.2f   |   x₂ = %.2f", x1, x2)
            );
            labelResultado.setFont(new Font("Arial", Font.BOLD, 16));
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(() -> {
            new EquacaoSegundoGrau().setVisible(true);
        });
    }
}
